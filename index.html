---
layout: default
---

<h2>What is VoodooSpark?</h2>

<p>VoodooSpark is a customized firmware build for the <a href="https://www.spark.io">Spark Core device</a> to allow a remote interface definition of the firmware API over a local TCP connection. The intent is to allow client-side programs to directly control the Spark Core in real-time regardless of their programming language. The interface exposed is directly mapped to the one provided by Spark available in their <a href="https://docs.spark.io/">docs section</a>.</p>
<p>The VoodooSpark uses the <a href="http://docs.spark.io/#/start/wait-what-is-this-thing-the-spark-cloud">Spark Cloud</a> and its REST API to provide IP address and port information to the local spark core. It will then initiate a direct connection to the host machine, on which will need to be a TCP server. Once the connection has been made, the host machine can drive the Spark Core using the binary protocol defined below to effectively execute firmware API level commands dynamically.</p>

<h2>Loading the Firmware</h2>
<p>With your Spark device connected to a Wifi network and has already gone through the <a href="http://docs.spark.io/#/start/step-1-power-the-core">"claim"/ownership process</a>:</p>
<ol>
  <li>Open the <a href="https://www.spark.io/build">Spark.io Editor</a> with the credentials used when going through the claiming process.</li>
  <li>Copy and paste the entire contents of <a href="https://raw.githubusercontent.com/voodootikigod/voodoospark/master/src/voodoospark.cpp">src/voodoospark.cpp</a> into the editor window.</li>
  <li>Click "Verify"</li>
  <li>Click "Flash"</li>
  <li>Once the flashing process is complete, close the Spark.io Editor.</li>
</ol>
<p>Now your Spark Core is running VoodooSpark, lets connect to it!</p>

<h2 id='connecting'>Connecting the Spark Core to You!</h2>
<p>The way VoodooSpark works is to use the Spark Cloud as a manner for initiating a TCP connection from the Spark Device to a host machine. You will need a valid TCP port open through your firewall (if you have on up) and have a TCP server running on that port.</p>
<p>In order to connect the Spark Core to your computer, you will need to issue an HTTP REST request to the Spark Cloud. This can be done via any programming language, but for this example we are using a simple CURL command. You will need some information outlined with curly braces below, please note the {DEVICE-ID} and {ACCESS-TOKEN} are available from the <a href="https://www.spark.io/build">Spark.io Editor</a></p>
<pre><code>curl -X POST https://api.spark.io/v1/devices/{DEVICE-ID}/connect \
     -D "access_token={ACCESS-TOKEN}&amp;params={IP-ADDRESS}:{PORT}"</code></pre>
<p>Once you issue this command the Spark Core will attempt to connect to the provide {IP-ADDRESS} machine on the provide {PORT} value. If you have troubles, please make sure you verify that those are correct. Once connected you can begin to send any <a href="/api.html">API command</a> through the TCP connection.</p>

<h2>Reference Implementations</h2>
<ul>
<li><a href="http://github.com/rwaldron/spark-io">Spark-io <i>node.js</i></a></li>
</ul>

